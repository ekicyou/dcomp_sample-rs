use pasta_stdlib::*;

pub mod 会話_1 {
    pub fn __start__(ctx) {
        ctx.actor = さくら;
        yield Actor("さくら");
        yield Talk("おはよう！");
    }
}

pub mod 別会話_1 {
    pub fn __start__(ctx) {
        ctx.actor = さくら;
        yield Actor("さくら");
        yield Talk("別の会話です。");
    }
}

pub mod pasta {
    pub fn jump(ctx, label, filters, args) {
        let label_fn = label_selector(label, filters);
        for a in label_fn(ctx, args) { yield a; }
    }

    pub fn call(ctx, label, filters, args) {
        let label_fn = label_selector(label, filters);
        for a in label_fn(ctx, args) { yield a; }
    }

    pub fn label_selector(label, filters) {
        let id = pasta_stdlib::select_label_to_id(label, filters);
        match id {
            1 => crate::会話_1::__start__,
            2 => crate::別会話_1::__start__,
            _ => |ctx, args| {
                yield Error(`ラベルID ${id} が見つかりませんでした。`);
            },
        }
    }
}
